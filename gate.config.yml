version: 1

phases:
  fast:
    - lint
    - typecheck
    - test
  pr:
    - lint
    - typecheck
    - test
    - build

gates:
  lint:
    command: pnpm -s eslint --ext .ts --ext .tsx src "test/*.ts"
    timeout: 60
  typecheck:
    command: pnpm -s tsc --noEmit
    timeout: 180
  test:
    command: pnpm -s test -- --run
    timeout: 600
  build:
    command: pnpm -s build
    timeout: 240

options:
  logTailLines: 50
  stopOnFirstFailure: true

